## Sudoku Solver C++ 代码介绍文档

### 1. 简介

本文档详细介绍了基于C++实现的数独(Sudoku)求解程序。该程序通过深度优先搜索(DFS)和候选值推断的方式解决标准9x9数独问题。数独是一种逻辑推理类的游戏，要求在9x9的网格中填入1到9的数字，使得每一行、每一列以及每个3x3的子网格内的数字互不重复。

### 2. 程序结构

该C++数独求解程序由一个 `Sudoku`类组成，该类负责处理数独网格的初始化、输入解析、候选值计算、推断求解以及最终输出结果。程序采用面向对象的设计，清晰地将数独求解的各个步骤封装在类方法中。

### 3. 类和函数说明

#### 3.1 `Sudoku` 类

`Sudoku`类是解决数独问题的核心。它定义了数独网格以及用于解析和求解的各种方法。该类的成员变量和成员函数如下：

#### 成员变量

* `std::vector<std::vector<int>> grid`: 这是一个9x9的二维数组，表示数独网格。未填入的格子用数字0表示。
* `const int GRID_SIZE = 9`: 数独网格的大小，固定为9（9x9的数独）。
* `const int BOX_SIZE = 3`: 每个3x3子网格的大小，固定为3。

#### 成员函数

##### 3.1.1 `Sudoku(const std::string &input)`

构造函数，用于初始化数独对象并解析输入的字符串，填充数独网格。

* 参数 `input`是一个长度为81的字符串，表示数独初始状态，未填入的格子用 `0`表示。
* 该函数内部调用了 `parse()`函数来解析输入。

##### 3.1.2 `void parse(const std::string &input)`

解析输入字符串并将其转换为9x9的二维数组 `grid`。

* 首先调用 `inputIsSafe()`检查输入字符串是否合法（长度必须为81）。
* 然后逐个将字符串中的字符转换为整数并填入 `grid`。

##### 3.1.3 `void inputIsSafe(const std::string &input)`

检查输入字符串是否合法。如果输入的字符串长度不是81，抛出 `std::invalid_argument`异常。

* 如果长度合法，解析继续进行；否则抛出错误提示。

##### 3.1.4 `std::vector<int> getRow(int row)`

获取指定行的所有元素。

* 参数 `row`：要获取的行的索引。
* 返回该行的数字，类型为 `std::vector<int>`。

##### 3.1.5 `std::vector<int> getColumn(int col)`

获取指定列的所有元素。

* 参数 `col`：要获取的列的索引。
* 返回该列的数字，类型为 `std::vector<int>`。

##### 3.1.6 `std::vector<int> getBox(int row, int col)`

获取指定位置的3x3子网格中的所有数字。

* 参数 `row`和 `col`：指定要获取的子网格位置。
* 返回该子网格中的数字，类型为 `std::vector<int>`。

##### 3.1.7 `std::set<int> getCandidateValues(int row, int col)`

获取某个特定位置的候选值，即可以合法填入的数字。

* 参数 `row`和 `col`：指定要检查的空格位置。
* 候选值通过以下几步过滤得到：
  * 当前行的已有数字。
  * 当前列的已有数字。
  * 当前3x3子网格的已有数字。
* 返回候选值的集合，类型为 `std::set<int>`。

##### 3.1.8 `bool inference()`

深度优先搜索(DFS)方法求解数独，尝试填入所有未填入的空格。

* 该方法遍历整个网格，找到第一个未填充的空格。
* 使用 `getCandidateValues()`获取该空格的所有候选值。
* 尝试将每个候选值填入空格中，然后递归调用 `inference()`求解后续空格。
* 如果所有空格都成功填充，返回 `true`表示找到解；否则回溯（将空格重置为0），并尝试下一个候选值。
* 返回 `true`表示成功找到一种解法，`false`表示无解。

##### 3.1.9 `void getAnswer()`

调用 `inference()`方法尝试求解数独。如果成功找到解，则输出数独解；否则输出提示无解。

* 如果成功求解，调用 `printGrid()`函数打印结果。
* 如果无解，则输出“该数独无解”。

##### 3.1.10 `void printGrid()`

将当前的数独网格以易读格式输出。每行的数字以空格分隔，行与行之间换行。

### 4. 主函数 (`main()`)

`main()`函数是程序的入口，负责初始化数独网格并调用求解函数。

#### 主函数说明：

* 定义了一个 `input`字符串，表示待求解的数独问题。该字符串包含81个字符，空格用 `0`表示，已知的数字直接作为字符输入。
* 创建 `Sudoku`类的实例 `Sudoku sudoku(input)`，并调用 `getAnswer()`方法进行求解。
* 程序执行完成后，输出数独解或无解提示。

### 5. 代码执行过程

1. **输入解析** ：程序接受一个长度为81的字符串，表示数独的初始状态。字符串中的每个字符对应数独网格中的一个格子，空格用 `0`表示。
2. **候选值计算** ：对于每一个空格，程序计算可以填入该空格的候选值。候选值是满足数独规则（每行、每列、每个3x3子网格中数字互不重复）的数字集合。
3. **深度优先搜索求解** ：程序使用递归和回溯的深度优先搜索(DFS)策略，逐个尝试填入候选值，并继续求解后续空格。如果遇到无法填入的情况，程序会回溯到前一个空格并尝试下一个候选值。
4. **解的输出** ：程序成功找到解时，输出数独的完整解。如果数独无解，程序输出提示信息。
